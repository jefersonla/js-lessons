<!DOCTYPE html>
<html>
<title>js-lessons: Interactive js exercises</title>
<meta charset="utf-8">
<link rel="stylesheet" href="assets/main.css">
<link rel="stylesheet" href="assets/codemirror/codemirror.css">
<link rel="stylesheet" href="assets/codemirror/addons/show-hint.css">
<link rel="stylesheet" href="assets/codemirror/addons/lint.css">
<script type="text/javascript">
	// Adds the implementation for Array.prototype.concatAll()
	function defineConcatAll() {
		Array.prototype.concatAll = function () {
			var results = [];

			this.forEach(function(subArray) {
				results.push.apply(results, subArray);
			});

			return results;
		};
	}

	/**
	 * Add the implementation for Array.prototype.concatMap()
	 */
	function defineConcatMap() {
		Array.prototype.concatMap = function(fnc) {
			return this.
				map(function (e) {
					return fnc(e);
				}).
				// apply the concatAll function to flatten the two-dimensional array
				concatAll();
		};
	}

	/**
	 * This function will be executed at the begining of each verifier function
	 */
	function preVerifierHook() {
		// Add helpers to prevent 'undefined is not a function' like errors
		defineConcatAll();
		defineConcatMap();
	}
</script>

<xmp theme="united" style="display:none;">
<div id="loader-wrapper">
	<div id="loader"></div>
	<div class="loader-section section-left"></div>
	<div class="loader-section section-right"></div>
</div>

# js-lessons
### Interactive js-lessons

## Introduction

Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore
et dolore magna aliqua. 

<div class="lesson">
	<textarea class="code" rows="8" cols="80">
function(console) {
	var names = ["Ben", "Jafar", "Matt", "Priya", "Brian"],
		counter;

	for(counter = 0; counter < names.length; counter++) {
		console.log(names[counter]);
	}
}
	</textarea>
	<div class="output"></div>
	<pre id="" class="verifier">
		// Traverse array with for loop
		function(str) {
			preVerifierHook();
			var fun = eval("(" + str + ")");
			var items = [];
			var got;
			var expected = '["Ben","Brian","Jafar","Matt","Priya"]';
			fun({
				log:function(name) {
					items.push(name);
					console.log(name);
				}
			});

			got = JSON.stringify(items.sort());
			if(got === expected) {
				return "Success!"
			}
			else {
				showLessonErrorMessage(expected, got, 'Note: order does not matter');
			}
		}
	</pre>
	<button class="go">Run</button>
</div>
<!-- ********************** START OF EXERCISE ********************** -->
<div style="display:none;" id="START-EXERCISE"></div>
<!-- ********************** LESSON 1 - BEGIN *********************** -->
<div style="display:none;" id="lessonB1"></div>

## Chapter 2

Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
culpa qui officia deserunt mollit anim id est laborum.

<div class="lesson">
	<textarea class="code" rows="8" cols="80">
function(console) {
	var names = ["Ben", "Jafar", "Matt", "Priya", "Brian"],
		counter;

	for(counter = 0; counter < names.length; counter++) {
		console.log(names[counter]);
	}
}
	</textarea>
	<div class="output"></div>
	<pre class="verifier">
		// Traverse array with for loop
		function(str) {
			preVerifierHook();
			var fun = eval("(" + str + ")");
			var items = [];
			var got;
			var expected = '["Ben","Brian","Jafar","Matt","Priya"]';
			fun({
				log:function(name) {
					items.push(name);
					console.log(name);
				}
			});

			got = JSON.stringify(items.sort());
			if(got === expected) {
				return "Success!"
			}
			else {
				showLessonErrorMessage(expected, got, 'Note: order does not matter');
			}
		}
	</pre>
	<button class="go">Run</button>
</div>
<div style="display:none;" id="lessonE1"></div> 
<!-- *********************** LESSON 2 - END *********************** -->
<!-- ********************** LESSON 2 - BEGIN ********************** -->
<div style="display:none;" id="lessonB2"></div> 

## Chapter 3

Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
culpa qui officia deserunt mollit anim id est laborum.

<div style="display:none;" id="lessonE2"></div>
<!-- *********************** LESSON 2 - END *********************** -->
<div style="display:none;" id="END-EXERCISE"></div>
<!-- ********************** END OF EXERCISE *********************** -->
</xmp>

<!-- Libraries for interface -->
<script src="assets/v/0.2/strapdown.js"></script>
<script src="assets/codemirror/codemirror.js"></script>
<!-- Some code mirrors addons -->
<script src="assets/codemirror/javascript.js"></script>
<script src="assets/codemirror/addons/matchbrackets.js"></script>
<script src="assets/codemirror/addons/autorefresh.js"></script>
<script src="assets/codemirror/addons/lint.js"></script>
<script src="assets/codemirror/addons/javascript-lint.js"></script>
<script src="assets/codemirror/addons/show-hint.js"></script>
<script src="assets/codemirror/addons/javascript-hint.js"></script>

<!-- APP LIBRARIES --> 
<script src="assets/app/wordlist.js"></script>
<script src="assets/app/utils.js"></script>
<!-- <script src="assets/app/main.js"></script> -->

<!-- Other utils libraries -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>

<script type="text/javascript">
	// Hide the remain exercises without remove markdown support
	// Remember to use functional paradigm :p
	(function (){
		var x = document.getElementById("START-EXERCISE");
		while(x.nextElementSibling.id != "END-EXERCISE"){
			x.style.display = "none";
			x = x.nextElementSibling;
		}
	})();

	(function (){
		var x = document.getElementsByClassName("go");
		
		// Just unhide to confirm this possibility
		_.each(x, function(el) {
			el.onclick = (ev) =>  {
				p = ev.target.parentElement.nextElementSibling;
				while(!p.id.startsWith("lessonB")){
					p = p.nextElementSibling;
				}

				p = p.nextElementSibling;
				while(!p.id.startsWith("lessonE")){
					p.style.display = "";
					p = p.nextElementSibling;
				}

				p.previousElementSibling.scrollIntoView();
			}
		}); 
	})();

	var codeMirrorEditors = [];
	var lessons = document.getElementsByClassName("lesson");

	_.each(lessons, function (el){
		var code = el.children[0];
		var output = el.children[1];
		var verifierScript = el.children[2];
		var go = el.children[3];

		code.style.visibility = null;
		code.style.display = null;

		var codeMirror = CodeMirror.fromTextArea(code, {
				lineNumbers: true,
				matchBrackets: true,
				mode: "javascript",
				autoRefresh: true,
				tabSize: 4,
				indentWithTabs: false,
				hint: true,
				mode: "javascript",
				gutters: ["CodeMirror-lint-markers"],
				lint: true,
				extraKeys: {
					"F4": function(cm) {
						cm.setOption("fullScreen", !cm.getOption("fullScreen"));
					},
					"Ctrl-Space": "autocomplete",
					"Esc": function(cm) {
						if (cm.getOption("fullScreen")) cm.setOption("fullScreen", false);
					}
				}
			});

		codeMirrorEditors.push(codeMirror);
	});

	// After all page got rendered remove loader
	document.body.classList.add("loaded");
</script>

</html>
<!-- TODO
	+ USE http://myjson.com/api to store JSON with progress of each student
	+ USE https://ihatetomatoes.net/create-custom-preloading-screen/ while markdown is parsed and content are hidding
-->